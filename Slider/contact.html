<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/494467da2b.js" crossorigin="anonymous"></script>
    <title>Contact Us</title>
    <link rel="icon" type="image/x-icon" href="./assets/Images/logo1.png">
    <link rel="stylesheet" href="./assets/css/style.css" />
    <link rel="stylesheet" href="./assets/css/carousel.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        .slidercaptcha {
            margin: 0 auto;
            width: 314px;
            height: 286px;
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.125);
            margin-top: 40px;
        }

        .slidercaptcha .card-body {
            padding: 1rem;
        }

        .slidercaptcha canvas:first-child {
            border-radius: 4px;
            border: 1px solid #e6e8eb;
        }

        .slidercaptcha.card .card-header {
            background-image: none;
            background-color: rgba(0, 0, 0, 0.03);
            font-size: 14px !important;
        }

        .refreshIcon {
            top: -54px;
        }

        @media screen and (max-width:400px) {
            .slidercaptcha {
                margin: 0 auto;
                width: inherit !important;
                height: 286px;
                border-radius: 4px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.125);
                margin-top: 40px;
            }

            .slidercaptcha canvas:first-child {
                width: 250px !important;
            }

            #captcha:nth-child(2) {
                width: 50px !important
            }

            div[id="captcha"] {
                width: inherit !important
            }

            .slidercaptcha.card .card-header {
                font-size: 11px !important;
            }
        }

        /* @media screen and (max-width: 1000px) {
            .slidercaptcha.card .card-header {
            font-size: 11px !important;
        } 
        }*/
    </style>
</head>

<body onload="initializeCaptcha()">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <div class="w-sm-60">
                <a href="/"><img class="h-25 w-25 " src="./assets/Images/logo1.png" alt="Logo"></a>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 gap-3">
                    <li class="nav-item">
                        <a class="nav-link " href="./about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="./contact.html">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="my-container">
        <div class="bg-img p-sm-5 p-4">
            <div class="d-flex justify-content-center flex-column m-auto">
                <div class="row mx-0 justify-content-center w-100">
                    <div class="col-md-8 col-lg-6  col-12 mx-0 bg-lightBlack p-4 rounded-3">
                        <form id="emailForm" action="http://localhost:4000/api/v1/users/sendEmail" method="post">
                            <div class="row mb-4">
                                <div class="col-sm-6 mb-sm-0 mb-4 w-full">
                                    <input id="firstName" type="text" class="w-100 form-control"
                                        placeholder="First Name" />
                                </div>
                                <div class="col-sm-6 w-full">
                                    <input id="lastName" type="text" class="w-100 form-control"
                                        placeholder="Last Name" />
                                </div>
                            </div>

                            <div class="row mb-4">
                                <div class="col-12">
                                    <input id="email" type="text" class="w-100 form-control" placeholder="Email" />
                                </div>
                            </div>
                            <div class="row mb-4">
                                <div class="col-3 pe-0 w-full"> <input id="areaCode" type="text"
                                        class="w-100 form-control" placeholder="Area Code" />
                                </div>
                                <div class="dash col-1 p-0 d-flex justify-content-center">_</div>
                                <div class="col-8 ps-0 w-full"> <input id="phoneNumber" type="text"
                                        class="w-100 form-control" placeholder="Phone Number" />
                                </div>
                            </div>
                            <div class="row mb-4">
                                <div class="col-12">
                                    <input id="company" type="text" class="w-100 form-control" placeholder="Company" />
                                </div>
                            </div>
                            <div class="row mb-4">
                                <div class="col-12">

                                    <input id="subject" type="text" class="w-100 form-control" placeholder="Subject" />
                                </div>
                            </div>
                            <div class="row mb-4">
                                <div class="col-12 mb-3">
                                    <textarea id="details" class=" w-100 form-control" rows="4" cols="50"
                                        placeholder="Details"></textarea>
                                </div>
                                <div>
                                    <label class="form-label">
                                        <input type="checkbox" />
                                        <span>
                                            Send a copy of this message to yourself:
                                        </span>
                                    </label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="pwd" class="fw-bold">Captcha:</label>
                                <!-- <div class="slidercaptcha card">
                                    <div class="card-header">
                                        <span>Complete the security check</span>
                                    </div>
                                    <div class="card-body">
                                        <div id="captcha"></div>
                                    </div>
                                </div> -->
                                <div class="container-fluid">
                                    <div class="row justify-content-center">
                                        <div class="col-md-6 mb-5">
                                            <div class="slidercaptcha card">
                                                <div class="card-header">
                                                    <span>Please complete security verification!</span>
                                                </div>
                                                <div class="card-body">
                                                    <div id="captcha"></div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                            <button type="submit" class="btn btn-success px-4 py-2" id="submitBtn"
                                disabled>Submit</button>
                            <!--<div class="row">
                                    <div class="col-10">
                                        <input type="text" name="maincaptcha" readonly class="form-control"
                                            id="mainCaptcha" />
                                    </div>
                                    <div class="col-2 d-flex justify-content-center align-items-center">
                                        <button class="btn btn-success btn-sm" onclick="generateCaptcha(event);"
                                            id="refresh"><i class="fa fa-refresh" style="font-size:17px"></i></button>
                                    </div>
                                </div> -->
                    </div>
                    <!-- <div class="mb-3">
                                <label for="pwd" class="fw-bold">Enter Captcha:</label>
                                <div class="row">
                                    <div class="col-sm-10">
                                        <input type="text" name="checkcaptcha" class="form-control" id="txtInput" />
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <span id="error" style="color:red;"></span>
                                <span id="success" style="color:green;"></span>
                            </div> -->

                    </form>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script>
        var menu_btn = document.querySelector("#menu-btn");
        var sidebar = document.querySelector("#sidebar");
        var container = document.querySelector(".my-container");
        menu_btn.addEventListener("click", () => {
            sidebar.classList.toggle("active-nav");
            container.classList.toggle("active-cont");
        });
    </script>
    <script>
        document.getElementById('emailForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent form submission

            // Retrieve form data
            var firstname = document.getElementById('firstName').value;
            var lastname = document.getElementById('lastName').value;
            var email = document.getElementById('email').value;
            var areaCode = document.getElementById('areaCode').value;
            var phoneNumber = document.getElementById('phoneNumber').value;
            var company = document.getElementById('company').value;
            var subject = document.getElementById('subject').value;
            var details = document.getElementById('details').value;

            // Create the email body
            var emailBody = "First Name: " + firstname + "\n";
            emailBody += "Last Name: " + lastname + "\n";
            emailBody += "Email: " + email + "\n";
            emailBody += "Phone Number: " + areaCode + "-" + phoneNumber + "\n";
            emailBody += "Company: " + company + "\n";
            emailBody += "Subject: " + subject + "\n";
            emailBody += "Details: " + details + "\n";
            console.log(emailBody);
            // Create the AJAX request
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost:4000/api/v1/users/sendEmail');
            xhr.setRequestHeader('Content-Type', 'application/json');

            // Send the form data as JSON in the request body
            xhr.send(JSON.stringify({
                firstname: firstname,
                lastname: lastname,
                email: email,
                areaCode: areaCode,
                phoneNumber: phoneNumber,
                company: company,
                subject: subject,
                details: details
            }));

            // Handle the AJAX response
            xhr.onload = function () {
                if (xhr.status === 200) {
                    // Request succeeded, show success message
                    alert('Email sent successfully!');
                    document.getElementById('emailForm').reset();
                    captcha.reset(); // Reset the form
                } else {
                    // Request failed, show error message
                    alert('Failed to send email. Please try again later. Make sure to fill all the fields.');
                }
            };
        });

        
    (function () { "use strict"; function u(n) { var i = document.getElementById(n.id), r = typeof n == "object" && n; return new t(i, r) } var r = function () { var u = arguments.length, n = arguments[0] || {}, t, i, r; for (typeof n != "object" && typeof n != "function" && (n = {}), u == 1 && (n = this, t--), t = 1; t < u; t++) { i = arguments[t]; for (r in i) Object.prototype.hasOwnProperty.call(i, r) && (n[r] = i[r]) } return n }, i = function (n) { return typeof n == "function" && typeof n.nodeType != "number" }, t = function (n, i) { this.$element = n; this.options = r({}, t.DEFAULTS, i); this.$element.style.position = "relative"; this.$element.style.width = this.options.width + "px"; this.$element.style.margin = "0 auto"; this.init() }, n; t.VERSION = "1.0"; t.Author = "argo@163.com"; t.DEFAULTS = { width: 280, height: 155, PI: Math.PI, sliderL: 42, sliderR: 9, offset: 5, loadingText: "æ­£åœ¨åŠ è½½ä¸­...", failedText: "å†è¯•ä¸€æ¬¡", barText: "å‘å³æ»‘åŠ¨å¡«å……æ‹¼å›¾", repeatIcon: "fa fa-repeat", maxLoadCount: 3, localImages: function () { return "images/Pic" + Math.round(Math.random() * 4) + ".jpg" }, verify: function (n, t) { var i = !1; return $.ajax({ url: t, data: { datas: JSON.stringify(n) }, dataType: "json", type: "post", async: !1, success: function (n) { i = JSON.stringify(n); console.log("è¿”å›žç»“æžœï¼š" + i) } }), i }, remoteUrl: null }; window.sliderCaptcha = u; window.sliderCaptcha.Constructor = t; n = t.prototype; n.init = function () { this.initDOM(); this.initImg(); this.bindEvents() }; n.initDOM = function () { var n = function (n, t) { var i = document.createElement(n); return i.className = t, i }, v = function (n, t) { var i = document.createElement("canvas"); return i.width = n, i.height = t, i }, f = v(this.options.width - 2, this.options.height), e = f.cloneNode(!0), t = n("div", "sliderContainer"), l = n("i", "refreshIcon " + this.options.repeatIcon), o = n("div", "sliderMask"), y = n("div", "sliderbg"), s = n("div", "slider"), a = n("i", "fa fa-arrow-right sliderIcon"), h = n("span", "sliderText"), u, c; e.className = "block"; h.innerHTML = this.options.barText; u = this.$element; u.appendChild(f); u.appendChild(l); u.appendChild(e); s.appendChild(a); o.appendChild(s); t.appendChild(y); t.appendChild(o); t.appendChild(h); u.appendChild(t); c = { canvas: f, block: e, sliderContainer: t, refreshIcon: l, slider: s, sliderMask: o, sliderIcon: a, text: h, canvasCtx: f.getContext("2d"), blockCtx: e.getContext("2d") }; i(Object.assign) ? Object.assign(this, c) : r(this, c) }; n.initImg = function () { var n = this, f = window.navigator.userAgent.indexOf("Trident") > -1, r = this.options.sliderL + this.options.sliderR * 2 + 3, e = function (t, i) { var r = n.options.sliderL, o = n.options.sliderR, s = n.options.PI, u = n.x, e = n.y; t.beginPath(); t.moveTo(u, e); t.arc(u + r / 2, e - o + 2, o, .72 * s, 2.26 * s); t.lineTo(u + r, e); t.arc(u + r + o - 2, e + r / 2, o, 1.21 * s, 2.78 * s); t.lineTo(u + r, e + r); t.lineTo(u, e + r); t.arc(u + o - 2, e + r / 2, o + .4, 2.76 * s, 1.24 * s, !0); t.lineTo(u, e); t.lineWidth = 2; t.fillStyle = "rgba(255, 255, 255, 0.7)"; t.strokeStyle = "rgba(255, 255, 255, 0.7)"; t.stroke(); t[i](); t.globalCompositeOperation = f ? "xor" : "destination-over" }, o = function (n, t) { return Math.round(Math.random() * (t - n) + n) }, t = new Image, u; t.crossOrigin = "Anonymous"; u = 0; t.onload = function () { n.x = o(r + 10, n.options.width - (r + 10)); n.y = o(10 + n.options.sliderR * 2, n.options.height - (r + 10)); e(n.canvasCtx, "fill"); e(n.blockCtx, "clip"); n.canvasCtx.drawImage(t, 0, 0, n.options.width - 2, n.options.height); n.blockCtx.drawImage(t, 0, 0, n.options.width - 2, n.options.height); var i = n.y - n.options.sliderR * 2 - 1, u = n.blockCtx.getImageData(n.x - 3, i, r, r); n.block.width = r; n.blockCtx.putImageData(u, 0, i + 1); n.text.textContent = n.text.getAttribute("data-text") }; t.onerror = function () { if (u++, window.location.protocol === "file:" && (u = n.options.maxLoadCount, console.error("can't load pic resource file from File protocal. Please try http or https")), u >= n.options.maxLoadCount) { n.text.textContent = "åŠ è½½å¤±è´¥"; n.classList.add("text-danger"); return } t.src = n.options.localImages() }; t.setSrc = function () { var r = "", e; u = 0; n.text.classList.remove("text-danger"); i(n.options.setSrc) && (r = n.options.setSrc()); r && r !== "" || (r = "https://picsum.photos/" + n.options.width + "/" + n.options.height + "/?image=" + Math.round(Math.random() * 20)); f ? (e = new XMLHttpRequest, e.onloadend = function (n) { var i = new FileReader; i.readAsDataURL(n.target.response); i.onloadend = function (n) { t.src = n.target.result } }, e.open("GET", r), e.responseType = "blob", e.send()) : t.src = r }; t.setSrc(); this.text.setAttribute("data-text", this.options.barText); this.text.textContent = this.options.loadingText; this.img = t }; n.clean = function () { this.canvasCtx.clearRect(0, 0, this.options.width, this.options.height); this.blockCtx.clearRect(0, 0, this.options.width, this.options.height); this.block.width = this.options.width }; n.bindEvents = function () { var n = this; this.$element.addEventListener("selectstart", function () { return !1 }); this.refreshIcon.addEventListener("click", function () { n.text.textContent = n.options.barText; n.reset(); i(n.options.onRefresh) && n.options.onRefresh.call(n.$element) }); var r, u, f = [], t = !1, e = function (i) { n.text.classList.contains("text-danger") || (r = i.clientX || i.touches[0].clientX, u = i.clientY || i.touches[0].clientY, t = !0) }, o = function (i) { var o; if (!t) return !1; var s = i.clientX || i.touches[0].clientX, h = i.clientY || i.touches[0].clientY, e = s - r, c = h - u; if (e < 0 || e + 40 > n.options.width) return !1; n.slider.style.left = e - 1 + "px"; o = (n.options.width - 60) / (n.options.width - 40) * e; n.block.style.left = o + "px"; n.sliderContainer.classList.add("sliderContainer_active"); n.sliderMask.style.width = e + 4 + "px"; f.push(Math.round(c)) }, s = function (u) { var o, e; if (!t || (t = !1, o = u.clientX || u.changedTouches[0].clientX, o === r)) return !1; n.sliderContainer.classList.remove("sliderContainer_active"); n.trail = f; e = n.verify(); e.spliced && e.verified ? (n.sliderContainer.classList.add("sliderContainer_success"), i(n.options.onSuccess) && n.options.onSuccess.call(n.$element)) : (n.sliderContainer.classList.add("sliderContainer_fail"), i(n.options.onFail) && n.options.onFail.call(n.$element), setTimeout(function () { n.text.innerHTML = n.options.failedText; n.reset() }, 1e3)) }; this.slider.addEventListener("mousedown", e); this.slider.addEventListener("touchstart", e); document.addEventListener("mousemove", o); document.addEventListener("touchmove", o); document.addEventListener("mouseup", s); document.addEventListener("touchend", s); document.addEventListener("mousedown", function () { return !1 }); document.addEventListener("touchstart", function () { return !1 }); document.addEventListener("swipe", function () { return !1 }) }; n.verify = function () { var n = this.trail, r = parseInt(this.block.style.left), t = !1; if (this.options.remoteUrl !== null) t = this.options.verify(n, this.options.remoteUrl); else { var i = function (n, t) { return n + t }, u = function (n) { return n * n }, f = n.reduce(i) / n.length, e = n.map(function (n) { return n - f }), o = Math.sqrt(e.map(u).reduce(i) / n.length); t = o !== 0 } return { spliced: Math.abs(r - this.x) < this.options.offset, verified: t } }; n.reset = function () { this.sliderContainer.classList.remove("sliderContainer_fail"); this.sliderContainer.classList.remove("sliderContainer_success"); this.slider.style.left = 0; this.block.style.left = 0; this.sliderMask.style.width = 0; this.clean(); this.text.setAttribute("data-text", this.text.textContent); this.text.textContent = this.options.loadingText; this.img.setSrc() } })();
        
    var captcha = sliderCaptcha({
            id: 'captcha',
            loadingText: 'Loading...',
            failedText: 'Try again',
            barText: 'Slide right to fill',
            repeatIcon: 'fa fa-redo',
            onSuccess: function () {
                // captcha.stop(); // Stop the captcha interaction
                alert('Captcha successfully completed!');
                var submitBtn = document.getElementById('submitBtn');
                submitBtn.removeAttribute('disabled')
            },
            onFail: function () {
                alert('Captcha Failed!');
                var submitBtn = document.getElementById('submitBtn');
                submitBtn.setAttribute('disabled', true);
            },
            onRefresh: function () {
                isCaptchaCompleted = false; // Set the global variable to false when the captcha is refreshed
                var submitButton = document.getElementById('submitBtn');
                submitButton.disabled = true; // Disable the submit button when the captcha is refreshed
            }
        });



        // // ----set-captcha with script
        // var captcha = sliderCaptcha({
        //     id: 'captcha',
        //     loadingText: 'Loading...',
        //     failedText: 'Try again',
        //     barText: 'Slide right to fill',
        //     repeatIcon: 'fa fa-redo',
        //     onSuccess: function () {
        //         // var handler = setTimeout(function () {
        //         //     window.clearTimeout(handler);
        //         //     captcha.reset();
        //         // }, 500);
        //         setTimeout(function () {
        //             alert('Your captcha is successfully verified.');
        //             captcha.reset();
        //         }, 1000);
        //     },
        //     setSrc: function () {
        //         //return 'https://picsum.photos/' + Math.round(Math.random() * 136) + '.jpg';
        //     },
        // });

    </script>

    <script>
        // Function to check if all required fields are filled
        function areFieldsFilled() {
        var requiredFields = ['firstName', 'lastName', 'email', 'areaCode', 'phoneNumber', 'subject', 'details'];
        
        for (var i = 0; i < requiredFields.length; i++) {
            var fieldValue = document.getElementById(requiredFields[i]).value.trim();
            if (fieldValue === '') {
                return false; // Return false if any required field is empty
            }
        }

        return true; // All required fields are filled
    }

    // Bind the areFieldsFilled function to the input event of each required field
    var requiredFields = document.querySelectorAll('#firstName, #lastName, #email, #areaCode, #phoneNumber, #subject, #details');
    requiredFields.forEach(function (field) {
        field.addEventListener('input', function () {
            var submitButton = document.getElementById('submitBtn');
            submitButton.disabled = !areFieldsFilled(); // Enable or disable the submit button based on the result of areFieldsFilled
        });
    });

    // Function to validate the form before submission
    function validateForm(event) {
        event.preventDefault(); // Prevent form submission
        
        // Check if all required fields are filled and captcha is completed
        if (areFieldsFilled() && captcha.isCaptchaCompleted()) {
            // Your existing form submission code here
            // ...
            alert('Form submitted successfully!');
            document.getElementById('emailForm').reset(); // Reset the form
            captcha.reset(); // Reset the captcha
        } else {
            alert('Please fill all required fields and complete the captcha.');
        }
    }

    // Bind the validateForm function to the form submission event
    var emailForm = document.getElementById('emailForm');
    emailForm.addEventListener('submit', validateForm);

        // Bind the areFieldsFilled function to the input event of each required field
        // var requiredFields = document.querySelectorAll('#firstName, #lastName, #email, #areaCode, #phoneNumber, #subject, #details');
        // requiredFields.forEach(function (field) {
        //     field.addEventListener('input', function () {
        //         var submitButton = document.getElementById('submitBtn');
        //         submitButton.disabled = areFieldsFilled(); // Enable or disable the submit button based on the result of areFieldsFilled
        //     });
        // });

    // Rest of your code...
    </script>

</body>

</html>